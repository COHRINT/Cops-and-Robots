function [ output_weights, output_means, output_covariances ] =...
    runnalls_gm_test()
load('data/from_python.mat')
% runnalls_gm_test(weights, means, covariances, max_num_mixands)

new_covariances = zeros(2,2, size(covariances, 1));
for i = 1:size(covariances, 1)
    new_covariances(1,:,i) = covariances(i,:,1);
    new_covariances(2,:,i) = covariances(i,:,2);
end

weights = [0.3, 0.5, 0.2];
means = [-1,-1;
          1,-2;
          6,3];

new_covariances= cat(3,...
                     eye(2),... eye(2) * 0.5, eye(2) * 0.3 + circshift(eye(2),1) * 0.2);
max_num_mixands = 2;
gm = gmdistribution(means, new_covariances, weights);
gm_runnals = runnallsjoingmm(gm, max_num_mixands);

weights = gm_runnals.ComponentProportion;
means = gm_runnals.mu;
covariances = gm_runnals.Sigma;
save('data/from_matlab.mat', 'weights', 'means', 'covariances')
end

